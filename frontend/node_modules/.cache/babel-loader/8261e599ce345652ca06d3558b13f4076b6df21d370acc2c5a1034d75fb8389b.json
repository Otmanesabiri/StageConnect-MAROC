{"ast":null,"code":"var _jsxFileName = \"/home/red/Documents/find_internship/frontend/src/pages/ProfilePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Form, Button, Card } from 'react-bootstrap';\nimport { toast } from 'react-toastify';\nimport axios from 'axios';\nimport { API_URL } from '../config';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ProfilePage = () => {\n  _s();\n  const [userInfo, setUserInfo] = useState(null);\n  const [formData, setFormData] = useState({});\n  useEffect(() => {\n    // Récupérer les informations utilisateur\n    const fetchUserInfo = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const config = {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        };\n        const {\n          data\n        } = await axios.get(`${API_URL}/auth/profile`, config);\n        setUserInfo(data);\n        setFormData(data);\n      } catch (error) {\n        toast.error('Erreur lors du chargement du profil');\n      }\n    };\n    fetchUserInfo();\n  }, []);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      };\n      const {\n        data\n      } = await axios.put(`${API_URL}/auth/profile`, formData, config);\n      setUserInfo(data);\n      toast.success('Profil mis à jour avec succès');\n    } catch (error) {\n      toast.error('Erreur lors de la mise à jour du profil');\n    }\n  };\n  if (!userInfo) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Chargement...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"py-4\",\n    children: /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: 6,\n        className: \"mx-auto\",\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow-sm\",\n          children: /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"mb-4\",\n              children: \"Mon Profil\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form, {\n              onSubmit: handleSubmit,\n              children: [userInfo.role === 'student' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Pr\\xE9nom\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    name: \"firstName\",\n                    value: formData.firstName || '',\n                    onChange: handleChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 69,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                  className: \"mb-3\",\n                  children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                    children: \"Nom\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    name: \"lastName\",\n                    value: formData.lastName || '',\n                    onChange: handleChange,\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true), userInfo.role === 'company' && /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Nom de l'entreprise\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"text\",\n                  name: \"companyName\",\n                  value: formData.companyName || '',\n                  onChange: handleChange,\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                className: \"mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"email\",\n                  name: \"email\",\n                  value: formData.email || '',\n                  onChange: handleChange,\n                  disabled: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 107,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"primary\",\n                className: \"w-100\",\n                children: \"Mettre \\xE0 jour\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(ProfilePage, \"buU3u0oqxdepaaaL6zm7e4IiHrc=\");\n_c = ProfilePage;\nexport default ProfilePage;\nvar _c;\n$RefreshReg$(_c, \"ProfilePage\");","map":{"version":3,"names":["React","useState","useEffect","Container","Row","Col","Form","Button","Card","toast","axios","API_URL","jsxDEV","_jsxDEV","Fragment","_Fragment","ProfilePage","_s","userInfo","setUserInfo","formData","setFormData","fetchUserInfo","token","localStorage","getItem","config","headers","Authorization","data","get","error","handleChange","e","name","value","target","handleSubmit","preventDefault","put","success","children","fileName","_jsxFileName","lineNumber","columnNumber","className","md","Body","onSubmit","role","Group","Label","Control","type","firstName","onChange","required","lastName","companyName","email","disabled","variant","_c","$RefreshReg$"],"sources":["/home/red/Documents/find_internship/frontend/src/pages/ProfilePage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Row, Col, Form, Button, Card } from 'react-bootstrap';\nimport { toast } from 'react-toastify';\nimport axios from 'axios';\nimport { API_URL } from '../config';\n\nconst ProfilePage = () => {\n  const [userInfo, setUserInfo] = useState(null);\n  const [formData, setFormData] = useState({});\n\n  useEffect(() => {\n    // Récupérer les informations utilisateur\n    const fetchUserInfo = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const config = {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        };\n        const { data } = await axios.get(`${API_URL}/auth/profile`, config);\n        setUserInfo(data);\n        setFormData(data);\n      } catch (error) {\n        toast.error('Erreur lors du chargement du profil');\n      }\n    };\n\n    fetchUserInfo();\n  }, []);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const token = localStorage.getItem('token');\n      const config = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n          'Content-Type': 'application/json',\n        },\n      };\n      const { data } = await axios.put(`${API_URL}/auth/profile`, formData, config);\n      setUserInfo(data);\n      toast.success('Profil mis à jour avec succès');\n    } catch (error) {\n      toast.error('Erreur lors de la mise à jour du profil');\n    }\n  };\n\n  if (!userInfo) {\n    return <p>Chargement...</p>;\n  }\n\n  return (\n    <Container className=\"py-4\">\n      <Row>\n        <Col md={6} className=\"mx-auto\">\n          <Card className=\"shadow-sm\">\n            <Card.Body>\n              <h2 className=\"mb-4\">Mon Profil</h2>\n              <Form onSubmit={handleSubmit}>\n                {userInfo.role === 'student' && (\n                  <>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Prénom</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"firstName\"\n                        value={formData.firstName || ''}\n                        onChange={handleChange}\n                        required\n                      />\n                    </Form.Group>\n                    <Form.Group className=\"mb-3\">\n                      <Form.Label>Nom</Form.Label>\n                      <Form.Control\n                        type=\"text\"\n                        name=\"lastName\"\n                        value={formData.lastName || ''}\n                        onChange={handleChange}\n                        required\n                      />\n                    </Form.Group>\n                  </>\n                )}\n\n                {userInfo.role === 'company' && (\n                  <Form.Group className=\"mb-3\">\n                    <Form.Label>Nom de l'entreprise</Form.Label>\n                    <Form.Control\n                      type=\"text\"\n                      name=\"companyName\"\n                      value={formData.companyName || ''}\n                      onChange={handleChange}\n                      required\n                    />\n                  </Form.Group>\n                )}\n\n                <Form.Group className=\"mb-3\">\n                  <Form.Label>Email</Form.Label>\n                  <Form.Control\n                    type=\"email\"\n                    name=\"email\"\n                    value={formData.email || ''}\n                    onChange={handleChange}\n                    disabled\n                  />\n                </Form.Group>\n\n                <Button type=\"submit\" variant=\"primary\" className=\"w-100\">\n                  Mettre à jour\n                </Button>\n              </Form>\n            </Card.Body>\n          </Card>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nexport default ProfilePage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}